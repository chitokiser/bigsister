]<!-- product.html -->
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/>
  <meta name="theme-color" content="#0C0F14"/>
  <title>PawMate · 상품 상세</title>

  <link rel="stylesheet" href="./styles.css"/>

  <!-- Firebase (compat) -->
  <script defer src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-check-compat.js"></script>

  <!-- Ethers (온체인 호출용) -->
  <script defer src="https://cdn.jsdelivr.net/npm/ethers@6.12.1/dist/ethers.umd.min.js"></script>

  <!-- 환경설정/컨트롤러: 반드시 firebase-init.js 보다 먼저 -->
  <script defer src="./src/config.js"></script>
  <!-- Firebase initializeApp 수행 -->
  <script defer src="./src/firebase-init.js"></script>

  <style>
    :root { --bg:#0b0f14; --card:#141a22; --line:#1f2633; --ink:#e6ebff; --muted:#9aa0a6; --btn:#1a2130; }
    body{background:var(--bg);color:var(--ink);font-family:Inter,system-ui,Segoe UI,Apple SD Gothic Neo,Malgun Gothic,Arial;}
    .container{max-width:1080px;margin:0 auto;padding:16px}
    .row{display:flex;gap:16px;align-items:flex-start;flex-wrap:wrap}
    .card{padding:14px;border:1px solid var(--line);border-radius:14px;background:#0f1218}
    .title{font-size:22px;font-weight:700;margin:0 0 8px}
    .muted{color:#9aa0a6}
    .btn{padding:10px 14px;border:1px solid #334;background:var(--btn);color:#e6ebff;border-radius:10px;cursor:pointer;text-decoration:none}
    .btn:disabled{opacity:.55;cursor:not-allowed}
    .hidden{display:none}
    .hero{flex:1 1 360px}
    .hero .thumb-wrap{position:relative;border-radius:12px;overflow:hidden;background:#0b0f16}
    .hero img{width:100%;height:auto;object-fit:cover;display:block}
    .details{flex:2 1 420px}
    .tags{margin-top:6px;color:#a9b1c7;font-size:13px}
    .grid{display:grid;gap:12px}
    .skeleton{background:linear-gradient(90deg, rgba(255,255,255,.06), rgba(255,255,255,.12), rgba(255,255,255,.06)); background-size:200% 100%; animation:s 1.4s ease-in-out infinite}
    @keyframes s{0%{background-position:200% 0}100%{background-position:-200% 0}}
  </style>
</head>
<body>
  <div id="app-header"></div>

  <!-- ⚠️ config.js가 이 엘리먼트를 감지해 자동 부팅합니다 -->
  <main class="container" id="product-page">
    <header class="row" style="justify-content:space-between;margin-bottom:8px">
      <nav class="row" style="gap:12px">
        <a href="index.html" class="btn">홈</a>
        <a href="search.html" class="btn">검색</a>
        <a href="my.html" class="btn">마이페이지</a>
      </nav>
      <span id="auth-email" class="muted">로그인 확인중…</span>
    </header>

    <section class="row">
      <article class="card hero" style="flex:1 1 380px">
        <div class="thumb-wrap">
          <img id="p-thumb" class="skeleton" src="https://placehold.co/800x600?text=Loading..." alt="thumbnail"/>
        </div>
      </article>

      <article class="card details">
        <h1 id="p-title" class="title">상품 제목</h1>
        <div id="p-tags" class="tags"></div>
        <p id="p-desc" class="muted" style="margin:6px 0 6px"></p>

        <!-- ✅ 가격 표시: config.js가 채워줍니다 (예: "가격 150PAW") -->
        <div id="p-price" class="muted hidden" style="font-weight:700;margin:4px 0 8px"></div>

        <div class="grid">
          <div>
            <div class="muted">설명 페이지</div>
            <a id="p-link" class="btn hidden" href="#" target="_blank" rel="noopener">상세 보기</a>
          </div>

          <div class="row" style="gap:8px; align-items:center">
            <!-- 판매 전: 상품 소유자에게만 보임 -->
            <button id="btn-queue" class="btn hidden" type="button">판매대기중</button>
            <!-- 판매 중: 누구에게나 보임 -->
            <button id="btn-buy" class="btn hidden" type="button">상품구매</button>
            <a class="btn" href="my.html">← 마이페이지</a>
          </div>

          <div id="status" class="muted"></div>
        </div>
      </article>
    </section>
  </main>

  <!-- (선택) app-shell이 Firebase에 의존하지 않으면 자유롭게 로드 -->
  <script type="module" src="./src/app-shell.js"></script>
  <div id="app-footer"></div>
</body>
</html>
